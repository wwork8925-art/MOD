{
  "version": 3,
  "sources": ["src/app/components/register/register.ts", "src/app/components/register/register.html"],
  "sourcesContent": ["import { Component, inject, signal } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router, RouterLink } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  imports: [FormsModule, RouterLink],\r\n  templateUrl: './register.html',\r\n  styleUrl: './register.css',\r\n})\r\nexport class Register {\r\n  private auth = inject(AuthService);\r\n  private router = inject(Router);\r\n\r\n  username = '';\r\n  password = '';\r\n  civilNumber = '';\r\n  phoneNumber = '';\r\n  profileImageUrl = '';\r\n  selectedFile: File | null = null;\r\n  imagePreview = signal<string>('');\r\n  uploading = signal(false);\r\n  loading = signal(false);\r\n  error = signal('');\r\n\r\n  onFileSelected(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    if (!input.files?.length) return;\r\n    const file = input.files[0];\r\n    this.selectedFile = file;\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => this.imagePreview.set(e.target?.result as string);\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  uploadImage(): void {\r\n    if (!this.selectedFile) return;\r\n    this.uploading.set(true);\r\n    this.auth.uploadProfileImage(this.selectedFile).subscribe({\r\n      next: (res) => {\r\n        this.profileImageUrl = res.imageUrl;\r\n        this.uploading.set(false);\r\n      },\r\n      error: (err) => {\r\n        this.error.set(err?.error?.message ?? 'خطأ في رفع الصورة');\r\n        this.uploading.set(false);\r\n      },\r\n    });\r\n  }\r\n\r\n  submit(): void {\r\n    if (!this.username.trim() || !this.password || !this.civilNumber.trim() || !this.phoneNumber.trim()) {\r\n      this.error.set('يرجى تعبئة جميع الحقول المطلوبة');\r\n      return;\r\n    }\r\n    this.loading.set(true);\r\n    this.error.set('');\r\n    this.auth\r\n      .register({\r\n        username: this.username.trim(),\r\n        password: this.password,\r\n        civilNumber: this.civilNumber.trim(),\r\n        number: this.phoneNumber.trim(),\r\n        profileImageUrl: this.profileImageUrl,\r\n      })\r\n      .subscribe({\r\n        next: () => this.router.navigate(['/hostels']),\r\n        error: (err) => {\r\n          this.error.set(err?.error?.message ?? 'حدث خطأ أثناء التسجيل');\r\n          this.loading.set(false);\r\n        },\r\n      });\r\n  }\r\n}\r\n", "<div class=\"auth-page\">\r\n  <div class=\"auth-card\">\r\n    <div class=\"auth-header\">\r\n      <div class=\"auth-icon\">&#128100;</div>\r\n      <h1>إنشاء حساب جديد</h1>\r\n      <p>انضم إلى نظام السكنات</p>\r\n    </div>\r\n\r\n    @if (error()) {\r\n      <div class=\"alert alert-error\">{{ error() }}</div>\r\n    }\r\n\r\n    <form (ngSubmit)=\"submit()\">\r\n      <!-- Profile Image -->\r\n      <div class=\"form-group\">\r\n        <label>صورة الملف الشخصي (اختياري)</label>\r\n        <div class=\"image-upload-area\">\r\n          @if (imagePreview()) {\r\n            <img [src]=\"imagePreview()\" alt=\"preview\" class=\"image-preview\" />\r\n          }\r\n          <div class=\"image-upload-controls\">\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              (change)=\"onFileSelected($event)\"\r\n              id=\"profile-img\"\r\n              style=\"display:none\"\r\n            />\r\n            <label for=\"profile-img\" class=\"btn btn-secondary btn-sm\">اختر صورة</label>\r\n            @if (selectedFile && !profileImageUrl) {\r\n              <button type=\"button\" class=\"btn btn-primary btn-sm\" (click)=\"uploadImage()\" [disabled]=\"uploading()\">\r\n                @if (uploading()) { جاري الرفع... } @else { رفع الصورة }\r\n              </button>\r\n            }\r\n            @if (profileImageUrl) {\r\n              <span class=\"success-badge\">&#10003; تم الرفع</span>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"reg-username\">اسم المستخدم *</label>\r\n        <input\r\n          id=\"reg-username\"\r\n          type=\"text\"\r\n          [(ngModel)]=\"username\"\r\n          name=\"username\"\r\n          placeholder=\"أدخل اسم المستخدم\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"reg-password\">كلمة المرور *</label>\r\n        <input\r\n          id=\"reg-password\"\r\n          type=\"password\"\r\n          [(ngModel)]=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"أدخل كلمة المرور\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-row\">\r\n        <div class=\"form-group\">\r\n          <label for=\"civil\">الرقم المدني *</label>\r\n          <input\r\n            id=\"civil\"\r\n            type=\"text\"\r\n            [(ngModel)]=\"civilNumber\"\r\n            name=\"civilNumber\"\r\n            placeholder=\"رقمك المدني\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"phone\">رقم الهاتف *</label>\r\n          <input\r\n            id=\"phone\"\r\n            type=\"text\"\r\n            [(ngModel)]=\"phoneNumber\"\r\n            name=\"number\"\r\n            placeholder=\"رقم الهاتف\"\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary btn-full\" [disabled]=\"loading() || uploading()\">\r\n        @if (loading()) {\r\n          <span class=\"spinner-sm\"></span>\r\n          <span>جاري التسجيل...</span>\r\n        } @else {\r\n          إنشاء الحساب\r\n        }\r\n      </button>\r\n    </form>\r\n\r\n    <p class=\"auth-footer\">\r\n      لديك حساب بالفعل؟; <a routerLink=\"/login\">تسجيل الدخول</a>\r\n    </p>\r\n  </div>\r\n</div>\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACSM,IAAA,yBAAA,GAAA,OAAA,CAAA;AAA+B,IAAA,iBAAA,CAAA;AAAa,IAAA,uBAAA;;;;AAAb,IAAA,oBAAA;AAAA,IAAA,4BAAA,OAAA,MAAA,CAAA;;;;;AASzB,IAAA,oBAAA,GAAA,OAAA,CAAA;;;;AAAK,IAAA,qBAAA,OAAA,OAAA,aAAA,GAAA,uBAAA;;;;;AAamB,IAAA,iBAAA,GAAA,8DAAA;;;;;AAAwB,IAAA,iBAAA,GAAA,2DAAA;;;;;;AAD9C,IAAA,yBAAA,GAAA,UAAA,EAAA;AAAqD,IAAA,qBAAA,SAAA,SAAA,2DAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,YAAA,CAAa;IAAA,CAAA;AACzE,IAAA,8BAAA,GAAA,gDAAA,GAAA,CAAA,EAAmB,GAAA,gDAAA,GAAA,CAAA;AACrB,IAAA,uBAAA;;;;AAF6E,IAAA,qBAAA,YAAA,OAAA,UAAA,CAAA;AAC3E,IAAA,oBAAA;AAAA,IAAA,wBAAA,OAAA,UAAA,IAAA,IAAA,CAAA;;;;;AAIF,IAAA,yBAAA,GAAA,QAAA,EAAA;AAA4B,IAAA,iBAAA,GAAA,oDAAA;AAAiB,IAAA,uBAAA;;;;;AA0DjD,IAAA,oBAAA,GAAA,QAAA,EAAA;AACA,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,GAAA,wEAAA;AAAe,IAAA,uBAAA;;;;;AAErB,IAAA,iBAAA,GAAA,uEAAA;;;ADrFJ,IAAO,WAAP,MAAO,UAAQ;EACX,OAAO,OAAO,WAAW;EACzB,SAAS,OAAO,MAAM;EAE9B,WAAW;EACX,WAAW;EACX,cAAc;EACd,cAAc;EACd,kBAAkB;EAClB,eAA4B;EAC5B,eAAe,OAAe,IAAE,GAAA,YAAA,CAAA,EAAA,WAAA,eAAA,CAAA,IAAA,CAAA,CAAA;EAChC,YAAY,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,YAAA,CAAA,IAAA,CAAA,CAAA;EACxB,UAAU,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EACtB,QAAQ,OAAO,IAAE,GAAA,YAAA,CAAA,EAAA,WAAA,QAAA,CAAA,IAAA,CAAA,CAAA;EAEjB,eAAe,OAAY;AACzB,UAAM,QAAQ,MAAM;AACpB,QAAI,CAAC,MAAM,OAAO;AAAQ;AAC1B,UAAM,OAAO,MAAM,MAAM,CAAC;AAC1B,SAAK,eAAe;AACpB,UAAM,SAAS,IAAI,WAAU;AAC7B,WAAO,SAAS,CAAC,MAAM,KAAK,aAAa,IAAI,EAAE,QAAQ,MAAgB;AACvE,WAAO,cAAc,IAAI;EAC3B;EAEA,cAAW;AACT,QAAI,CAAC,KAAK;AAAc;AACxB,SAAK,UAAU,IAAI,IAAI;AACvB,SAAK,KAAK,mBAAmB,KAAK,YAAY,EAAE,UAAU;MACxD,MAAM,CAAC,QAAO;AACZ,aAAK,kBAAkB,IAAI;AAC3B,aAAK,UAAU,IAAI,KAAK;MAC1B;MACA,OAAO,CAAC,QAAO;AACb,aAAK,MAAM,IAAI,KAAK,OAAO,WAAW,yFAAmB;AACzD,aAAK,UAAU,IAAI,KAAK;MAC1B;KACD;EACH;EAEA,SAAM;AACJ,QAAI,CAAC,KAAK,SAAS,KAAI,KAAM,CAAC,KAAK,YAAY,CAAC,KAAK,YAAY,KAAI,KAAM,CAAC,KAAK,YAAY,KAAI,GAAI;AACnG,WAAK,MAAM,IAAI,wKAAiC;AAChD;IACF;AACA,SAAK,QAAQ,IAAI,IAAI;AACrB,SAAK,MAAM,IAAI,EAAE;AACjB,SAAK,KACF,SAAS;MACR,UAAU,KAAK,SAAS,KAAI;MAC5B,UAAU,KAAK;MACf,aAAa,KAAK,YAAY,KAAI;MAClC,QAAQ,KAAK,YAAY,KAAI;MAC7B,iBAAiB,KAAK;KACvB,EACA,UAAU;MACT,MAAM,MAAM,KAAK,OAAO,SAAS,CAAC,UAAU,CAAC;MAC7C,OAAO,CAAC,QAAO;AACb,aAAK,MAAM,IAAI,KAAK,OAAO,WAAW,iHAAuB;AAC7D,aAAK,QAAQ,IAAI,KAAK;MACxB;KACD;EACL;;qCA9DW,WAAQ;EAAA;yEAAR,WAAQ,WAAA,CAAA,CAAA,cAAA,CAAA,GAAA,OAAA,IAAA,MAAA,IAAA,QAAA,CAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,SAAA,aAAA,GAAA,CAAA,GAAA,UAAA,GAAA,CAAA,GAAA,YAAA,GAAA,CAAA,GAAA,mBAAA,GAAA,CAAA,OAAA,WAAA,GAAA,iBAAA,GAAA,KAAA,GAAA,CAAA,GAAA,uBAAA,GAAA,CAAA,QAAA,QAAA,UAAA,WAAA,MAAA,eAAA,GAAA,WAAA,QAAA,GAAA,QAAA,GAAA,CAAA,OAAA,eAAA,GAAA,OAAA,iBAAA,QAAA,GAAA,CAAA,QAAA,UAAA,GAAA,OAAA,eAAA,UAAA,GAAA,UAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,OAAA,cAAA,GAAA,CAAA,MAAA,gBAAA,QAAA,QAAA,QAAA,YAAA,eAAA,gGAAA,YAAA,IAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,OAAA,cAAA,GAAA,CAAA,MAAA,gBAAA,QAAA,YAAA,QAAA,YAAA,eAAA,0FAAA,YAAA,IAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,UAAA,GAAA,CAAA,OAAA,OAAA,GAAA,CAAA,MAAA,SAAA,QAAA,QAAA,QAAA,eAAA,eAAA,iEAAA,YAAA,IAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,OAAA,OAAA,GAAA,CAAA,MAAA,SAAA,QAAA,QAAA,QAAA,UAAA,eAAA,2DAAA,YAAA,IAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,QAAA,UAAA,GAAA,OAAA,eAAA,YAAA,GAAA,UAAA,GAAA,CAAA,GAAA,aAAA,GAAA,CAAA,cAAA,QAAA,GAAA,CAAA,QAAA,UAAA,GAAA,OAAA,eAAA,UAAA,GAAA,SAAA,UAAA,GAAA,CAAA,GAAA,YAAA,CAAA,GAAA,UAAA,SAAA,kBAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;ACXrB,MAAA,yBAAA,GAAA,OAAA,CAAA,EAAuB,GAAA,OAAA,CAAA,EACE,GAAA,OAAA,CAAA,EACI,GAAA,OAAA,CAAA;AACA,MAAA,iBAAA,GAAA,WAAA;AAAS,MAAA,uBAAA;AAChC,MAAA,yBAAA,GAAA,IAAA;AAAI,MAAA,iBAAA,GAAA,kFAAA;AAAe,MAAA,uBAAA;AACnB,MAAA,yBAAA,GAAA,GAAA;AAAG,MAAA,iBAAA,GAAA,iHAAA;AAAqB,MAAA,uBAAA,EAAI;AAG9B,MAAA,8BAAA,GAAA,iCAAA,GAAA,GAAA,OAAA,CAAA;AAIA,MAAA,yBAAA,IAAA,QAAA,CAAA;AAAM,MAAA,qBAAA,YAAA,SAAA,8CAAA;AAAA,eAAY,IAAA,OAAA;MAAQ,CAAA;AAExB,MAAA,yBAAA,IAAA,OAAA,CAAA,EAAwB,IAAA,OAAA;AACf,MAAA,iBAAA,IAAA,2IAAA;AAA2B,MAAA,uBAAA;AAClC,MAAA,yBAAA,IAAA,OAAA,CAAA;AACE,MAAA,8BAAA,IAAA,kCAAA,GAAA,GAAA,OAAA,CAAA;AAGA,MAAA,yBAAA,IAAA,OAAA,CAAA,EAAmC,IAAA,SAAA,EAAA;AAI/B,MAAA,qBAAA,UAAA,SAAA,2CAAA,QAAA;AAAA,eAAU,IAAA,eAAA,MAAA;MAAsB,CAAA;AAHlC,MAAA,uBAAA;AAOA,MAAA,yBAAA,IAAA,SAAA,EAAA;AAA0D,MAAA,iBAAA,IAAA,mDAAA;AAAS,MAAA,uBAAA;AACnE,MAAA,8BAAA,IAAA,kCAAA,GAAA,GAAA,UAAA,EAAA;AAKA,MAAA,8BAAA,IAAA,kCAAA,GAAA,GAAA,QAAA,EAAA;AAGF,MAAA,uBAAA,EAAM,EACF;AAGR,MAAA,yBAAA,IAAA,OAAA,CAAA,EAAwB,IAAA,SAAA,EAAA;AACI,MAAA,iBAAA,IAAA,uEAAA;AAAc,MAAA,uBAAA;AACxC,MAAA,yBAAA,IAAA,SAAA,EAAA;AAGE,MAAA,2BAAA,iBAAA,SAAA,kDAAA,QAAA;AAAA,QAAA,6BAAA,IAAA,UAAA,MAAA,MAAA,IAAA,WAAA;AAAA,eAAA;MAAA,CAAA;AAHF,MAAA,uBAAA,EAOE;AAGJ,MAAA,yBAAA,IAAA,OAAA,CAAA,EAAwB,IAAA,SAAA,EAAA;AACI,MAAA,iBAAA,IAAA,iEAAA;AAAa,MAAA,uBAAA;AACvC,MAAA,yBAAA,IAAA,SAAA,EAAA;AAGE,MAAA,2BAAA,iBAAA,SAAA,kDAAA,QAAA;AAAA,QAAA,6BAAA,IAAA,UAAA,MAAA,MAAA,IAAA,WAAA;AAAA,eAAA;MAAA,CAAA;AAHF,MAAA,uBAAA,EAOE;AAGJ,MAAA,yBAAA,IAAA,OAAA,EAAA,EAAsB,IAAA,OAAA,CAAA,EACI,IAAA,SAAA,EAAA;AACH,MAAA,iBAAA,IAAA,uEAAA;AAAc,MAAA,uBAAA;AACjC,MAAA,yBAAA,IAAA,SAAA,EAAA;AAGE,MAAA,2BAAA,iBAAA,SAAA,kDAAA,QAAA;AAAA,QAAA,6BAAA,IAAA,aAAA,MAAA,MAAA,IAAA,cAAA;AAAA,eAAA;MAAA,CAAA;AAHF,MAAA,uBAAA,EAOE;AAGJ,MAAA,yBAAA,IAAA,OAAA,CAAA,EAAwB,IAAA,SAAA,EAAA;AACH,MAAA,iBAAA,IAAA,2DAAA;AAAY,MAAA,uBAAA;AAC/B,MAAA,yBAAA,IAAA,SAAA,EAAA;AAGE,MAAA,2BAAA,iBAAA,SAAA,kDAAA,QAAA;AAAA,QAAA,6BAAA,IAAA,aAAA,MAAA,MAAA,IAAA,cAAA;AAAA,eAAA;MAAA,CAAA;AAHF,MAAA,uBAAA,EAOE,EACE;AAGR,MAAA,yBAAA,IAAA,UAAA,EAAA;AACE,MAAA,8BAAA,IAAA,kCAAA,GAAA,CAAA,EAAiB,IAAA,kCAAA,GAAA,CAAA;AAMnB,MAAA,uBAAA,EAAS;AAGX,MAAA,yBAAA,IAAA,KAAA,EAAA;AACE,MAAA,iBAAA,IAAA,iGAAA;AAAmB,MAAA,yBAAA,IAAA,KAAA,EAAA;AAAuB,MAAA,iBAAA,IAAA,qEAAA;AAAY,MAAA,uBAAA,EAAI,EACxD,EACA;;;AAhGJ,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,MAAA,IAAA,IAAA,EAAA;AASM,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,aAAA,IAAA,KAAA,EAAA;AAYE,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,gBAAA,CAAA,IAAA,kBAAA,KAAA,EAAA;AAKA,MAAA,oBAAA;AAAA,MAAA,wBAAA,IAAA,kBAAA,KAAA,EAAA;AAYF,MAAA,oBAAA,CAAA;AAAA,MAAA,2BAAA,WAAA,IAAA,QAAA;AAYA,MAAA,oBAAA,CAAA;AAAA,MAAA,2BAAA,WAAA,IAAA,QAAA;AAaE,MAAA,oBAAA,CAAA;AAAA,MAAA,2BAAA,WAAA,IAAA,WAAA;AAYA,MAAA,oBAAA,CAAA;AAAA,MAAA,2BAAA,WAAA,IAAA,WAAA;AAQiD,MAAA,oBAAA;AAAA,MAAA,qBAAA,YAAA,IAAA,QAAA,KAAA,IAAA,UAAA,CAAA;AACrD,MAAA,oBAAA;AAAA,MAAA,wBAAA,IAAA,QAAA,IAAA,KAAA,EAAA;;oBDrFI,aAAW,oBAAA,sBAAA,iBAAA,sBAAA,mBAAA,SAAA,QAAE,UAAU,GAAA,QAAA,CAAA,w+EAAA,EAAA,CAAA;;;sEAItB,UAAQ,CAAA;UANpB;uBACW,gBAAc,SACf,CAAC,aAAa,UAAU,GAAC,UAAA,i3IAAA,QAAA,CAAA,wkEAAA,EAAA,CAAA;;;;6EAIvB,UAAQ,EAAA,WAAA,YAAA,UAAA,2CAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
